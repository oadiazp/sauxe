Ext.Ajax.disableCaching=false;Ext.Ajax.method="post";Ext.QuickTips.init();Ext.Ajax.on("requestcomplete",function(e,a,b){var c=a.responseText;var d=a.responseXML;if(c&&!d){var g=Ext.decode(c);if(g.mensaje&&g.codMsg&&typeof(g.mensaje)!="xml"){showMessage(g.codMsg,g.mensaje,null,g.detalles)}}});Ext.BLANK_IMAGE_URL="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";winError=null;function showMessage(b,h,c,e){var d=new Array(Ext.MessageBox.OK,Ext.MessageBox.OKCANCEL,Ext.MessageBox.OK);var g=new Array("Informaci&oacute;n","Confirmaci&oacute;n","Error");var a=new Array(Ext.MessageBox.INFO,Ext.MessageBox.QUESTION,Ext.MessageBox.ERROR);if(b==4){if(!winError){winError=new Ext.Window({title:" ERROR ",width:400,minWidth:300,buttonAlign:"center",autoHeight:true,closeAction:"hide",bodyBorder:false,layout:"fit",defaults:{frame:true,border:false},items:new Ext.Panel({frame:true,monitorResize:true,autoHeight:true,layout:"column",items:[{columnWidth:0.2,items:{style:"margin:2px 0px 0px 2px;",html:'<div id="iconoERROR" class="iconoERROR></div>'}},{columnWidth:0.7,items:{xtype:"panel",autoHeight:true,html:'<div id="pMSG">'+h+"</div>"}},{columnWidth:1,items:new Ext.form.FieldSet({autoScroll:true,layout:"form",title:" Detalles : ",autoWidth:true,html:'<div id="pDetalle">'+e+"</div>",autoHeight:true,collapsed:true,collapsible:true})}]}),buttons:[{text:"OK",handler:function(){winError.hide();if(typeof(c)=="function"){c()}}}]})}winError.show(Ext.getBody());document.getElementById("pMSG").innerHTML=h;document.getElementById("pDetalle").innerHTML=e}else{Ext.MessageBox.show({title:g[b-1],msg:h,buttons:d[b-1],icon:a[b-1],fn:c})}}Ext.override(Ext.form.Field,{setRegEx:function(a){this.regex=a},setRegExText:function(a){this.regexText=a},setFieldLabel:function(a){this.label.update(a+":")},setAllowBlank:function(a){this.allowBlank=a},setBlankText:function(a){this.blankText=a}});Ext.ns("Componentes");Ext.ns("APPP");Ext.ns("Componentes.CU");function createGrid(e,b,c,a,d){d=(d!=null)?d:555;a=(a!=null)?a:"auto";return new Ext.grid.GridPanel({height:d,store:e,width:a,columns:b,tbar:c,loadMask:{msg:"Cargando ...",store:e},bbar:new Ext.PagingToolbar({store:e,pageSize:5})})}function createReader(b,a){return new Ext.data.JsonReader({root:b,totalProperty:"cant"},a)}function renderPic(a){return"<img src = '"+a+"'/>"}function createForm(b,a){frm=new Ext.form.FormPanel({items:b,frame:true,title:a});return frm}function createTextField(a,c,b){regex=null;switch(b){case"enterospos":regex=/^[0-9]+$/;break;case"numerosguionbajo":regex=/^[0-9]+(_[0-9]+)*$/;break;case"letras":regex=/^([a-zA-Z????????????????]+ ?[a-zA-Z????????????????]*)+$/;break;case"numerosletras":regex=/^([a-zA-Z0-9????????????????]+ ?[a-zA-Z0-9????????????????]*)+$/;break;case"email":regex=/^[^@ ]+@[^@ ]+.[^@ .]+$/;break;case"real":regex=/^-?^[0-9]+(.?[0-9]*)?$/;break;case"ireal":regex=/^-?[0-9]+(\.[0-9]*)?$/;break}return new Ext.form.TextField({regex:regex,fieldLabel:c,id:a})}function createWindow(a,b){win=new Ext.Window({title:a,closable:false,items:b,modal:true,width:300});return win}function createStore(a,b){return new Ext.data.Store({url:a,totalProperty:"cant",reader:b})}function createGroupStore(a,b,c){return new Ext.data.GroupingStore({url:b,totalProperty:"cant",reader:c,sortInfo:{direction:"ASC",field:a},groupField:a})}function createCombo(d,a,e,b,c){combo=new Ext.form.ComboBox({xtype:"combo",store:d,hiddenName:a,valueField:e,displayField:b,triggerAction:"all",fieldLabel:c,mode:"remote"});return combo}function createPrinter(a,c,b){return new Ext.grid.XPrinter({grid:a,pathPrinter:"../../../classes/ZCPrinter",pdfEnable:true,localeData:{Title:c,footerText:"Asamblea Provincial de Poder Popular",subTitle:b,pageNo:"P&aacute;gina #",printText:"Imprimir",closeText:"Cerrar",pdfText:"Descargar"},useCustom:{custom:false,customStore:null,columns:[],alignCols:[],pageToolbar:null,useIt:true,showIt:false,location:"bbar"}})}function importarJS(b){var a=document.createElement("script");a.setAttribute("src",b);a.setAttribute("type","text/javascript");document.getElementsByTagName("head")[0].appendChild(a)}function importarCSS(a){var b=document.createElement("link");b.setAttribute("href",a);b.setAttribute("rel","stylesheet");b.setAttribute("type","text/css");document.getElementsByTagName("head")[0].appendChild(b)}function render_check(a){path=(a==1)?"../../../public/js/ext/resources/images/default/menu/checked.gif":"../../../public/js/ext/resources/images/default/menu/unchecked.gif";return"<img src = '"+path+"'>"}Componentes.CRUDToolbar=Ext.extend(Ext.Toolbar,{initComponent:function(){addButton=new Ext.Button({disabled:this.disableAdd,text:"Adicionar",iconCls:"add"});addButton.setHandler(function(){this.addFn()},this);updButton=new Ext.Button({disabled:this.disableUpd,text:"Modificar",iconCls:"option"});updButton.setHandler(function(){this.updFn()},this);remButton=new Ext.Button({disabled:this.disableRem,text:"Eliminar",iconCls:"remove"});remButton.setHandler(function(){this.remFn()},this);this.items=[addButton,updButton,remButton];Componentes.CRUDToolbar.superclass.initComponent.call(this)},disableAll:function(){for(i=0;i<items.length;i++){Ext.getCmp(items[i].id).disable()}},enableAll:function(){for(i=0;i<items.length;i++){Ext.getCmp(items[i].id).enable()}}});Componentes.PagedGridPanel=Ext.extend(Ext.grid.GridPanel,{initComponent:function(){this.bbar=new Ext.PagingToolbar({pageSize:this.pageSize,store:this.store});Componentes.PagedGridPanel.superclass.initComponent.call(this)}});Componentes.Window=Ext.extend(Ext.Window,{setFn:function(b,a){this.fn=b},getOkBtn:function(){return this.btnOk},getCancelBtn:function(){return this.btnCancel},getApplyBtn:function(){return this.btnApply},initComponent:function(){this.btnOk=new Ext.Button({text:"Aceptar",id:Ext.id()});this.btnCancel=new Ext.Button({text:"Cancelar",id:Ext.id()});this.btnApply=new Ext.Button({text:"Aplicar",id:Ext.id()});this.btnOk.setHandler(function(){f=this.findByType("form");f=f[0];f.getForm().on("actionfailed",function(a){a.reset()});this.fn();this.hide()},this);this.btnApply.setHandler(function(){f=this.findByType("form");f=f[0];f.getForm().on("actionfailed",function(a){});this.fn()},this);this.btnCancel.setHandler(function(){f=this.findByType("form");f=f[0];f.getForm().reset();this.hide()},this);this.buttons=[this.btnOk,this.btnApply,this.btnCancel];Componentes.Window.superclass.initComponent.call(this)}});Ext.reg("ciext-window",Componentes.Window);Componentes.CRUDGrid=Ext.extend(Componentes.PagedGridPanel,{initComponent:function(){configTbar={addFn:function(){this.grid.addFn()},updFn:function(){this.grid.updFn()},remFn:function(){this.grid.remFn()},disableRem:true,disableUpd:true};configTbar.grid=this;this.tbar=new Componentes.CRUDToolbar(configTbar);Componentes.CRUDGrid.superclass.initComponent.call(this);this.getSelectionModel().on("selectionchange",function(){this.getTopToolbar().get(1).setDisabled(this.getSelectionModel().getSelected()==null);this.getTopToolbar().get(2).setDisabled(this.getSelectionModel().getSelected()==null)},this)},addToolbarButton:function(a){this.tbar.add(a)},disableBtn:function(a){Ext.getCmp(a).disable()}});Ext.reg("crudgrid",Componentes.CRUDGrid);Componentes.UI=function(a){if(typeof(window.curURL)=="undefined"){window.curURL=""}Ext.Ajax.request({url:location.href+"ui/load_ui",params:{url:window.curURL},success:function(b){obj=Ext.decode(b.responseText);fields=obj.fields;labels=Ext.decode(obj.labels);a({labels:labels,fields:fields});for(i=0;i<fields.length;i++){id=fields[i].id;cmp=Ext.getCmp(id);if(fields[i].regex){cmp.setRegEx(new RegExp(fields[i].regex));cmp.setRegExText(fields[i].regexText)}if(fields[i].blankText){cmp.setAllowBlank(false);cmp.setBlankText(fields[i].blankText)}}for(key in labels){currComponent=Ext.getCmp(key);if(currComponent){if(currComponent.getXType()=="button"){currComponent.setText(labels[key])}else{currComponent.setFieldLabel(labels[key])}}else{grid=Ext.getCmp("grid");if(grid){cm=grid.getColumnModel();index=cm.getIndexById(key);if(index!=-1){cm.setColumnHeader(index,labels[key])}}}}}})};Ext.reg("ui",Componentes.UI);Componentes.CRUDTree=Ext.extend(Ext.tree.TreePanel,{initComponent:function(){configTbar={addFn:function(){this.tree.addFn()},updFn:function(){this.tree.updFn()},remFn:function(){this.tree.remFn()},disableRem:true,disableUpd:true};configTbar.tree=this;this.getSelectionModel().on("selectionchange",function(){Ext.getCmp("rem").setDisabled(this.getSelectionModel().getSelectedNode()==null);Ext.getCmp("upd").setDisabled(this.getSelectionModel().getSelectedNode()==null)},this);this.tbar=new Componentes.CRUDToolbar(configTbar);Componentes.CRUDTree.superclass.initComponent.call(this)}});Ext.reg("crudtree",Componentes.CRUDTree);Componentes.TreeText=Ext.extend(Ext.form.TextField,{VALUE:1,TEXT:2,CHECK:3,getValue:function(){if(this.submitType==this.CHECK){result=[];checked=this.tree.getChecked();for(i=0;i<checked.length;i++){result.push(checked[i])}return Ext.encode(result)}else{if(this.tree.getSelectionModel().getSelectedNode()){return this.tree.getSelectionModel().getSelectedNode().id}else{return null}}},select:function(){if(this.submitType==this.CHECK){this.setRawValue("...")}else{this.setRawValue(this.tree.getSelectionModel().getSelectedNode().attributes.text)}this.win.hide()},initComponent:function(){this.tree=new Ext.tree.TreePanel(this.tree);if(!this.window){this.window={}}this.window.closable=false;this.window.modal=true;this.window.title="Seleccionar";this.window.items=this.tree;this.btn=new Ext.Button({scope:this,text:"Seleccionar",handler:function(){this.select()}});this.window.buttons=[this.btn];this.win=new Ext.Window(this.window);Componentes.TreeText.superclass.initComponent.call(this);this.on("focus",function(a){a.win.show()})}});Ext.reg("treetext",Componentes.TreeText);Componentes.CRUDPanel=new Ext.extend(Ext.Panel,{initComponent:function(){this.tbar=new Componentes.CRUDToolbar({addFn:this.addFn,updFn:this.updFn,remFn:this.remFn});Componentes.CRUDPanel.superclass.initComponent.call(this)}});Ext.reg("crudpanel",Componentes.CRUDPanel);Componentes.ComboBox=Ext.extend(Ext.form.ComboBox,{triggerAction:"all",mode:"remote",initComponent:function(){Componentes.ComboBox.superclass.initComponent.call(this)}});